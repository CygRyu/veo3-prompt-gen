<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veo 3 Prompt Generator</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="https://github.com/CygRyu/veo3-prompt-gen/raw/main/Logo%20no%20bg.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://github.com/CygRyu/veo3-prompt-gen/raw/main/Logo%20no%20bg.png">
    <link rel="shortcut icon" href="https://github.com/CygRyu/veo3-prompt-gen/raw/main/Logo%20no%20bg.png">
    
    <!-- Apple Touch Icon for iOS -->
    <link rel="apple-touch-icon" href="https://github.com/CygRyu/veo3-prompt-gen/raw/main/Logo.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://github.com/CygRyu/veo3-prompt-gen/raw/main/Logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://github.com/CygRyu/veo3-prompt-gen/raw/main/Logo.png">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlZlbyAzIFByb21wdCBHZW5lcmF0b3IiLAogICJzaG9ydF9uYW1lIjogIlZlbyAzIEdlbiIsCiAgImRlc2NyaXB0aW9uIjogIlByb21wdCBlbmhhbmNlciBmb3IgVmVvIDMiLAogICJzdGFydF91cmwiOiAiLyIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgInRoZW1lX2NvbG9yIjogIiM1RDVDREUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmZmZmZmYiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJodHRwczovL2dpdGh1Yi5jb20vQ3lnUnl1L3ZlbzMtcHJvbXB0LWdlbi9yYXcvbWFpbi9Mb2dvLnBuZyIsCiAgICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJodHRwczovL2dpdGh1Yi5jb20vQ3lnUnl1L3ZlbzMtcHJvbXB0LWdlbi9yYXcvbWFpbi9Mb2dvLnBuZyIsCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIgogICAgfQogIF0KfQ==">
    
    <!-- Meta Tags for Social Media Sharing -->
    <meta name="description" content="Prompt enhancer for Veo 3 - Generate enhanced prompts for AI video creation with advanced customization options">
    <meta name="keywords" content="Veo 3, AI video, prompt generator, video generation, AI prompts">
    
    <!-- Open Graph Meta Tags (Facebook, LinkedIn, etc.) -->
    <meta property="og:title" content="Veo 3 Prompt Generator">
    <meta property="og:description" content="Prompt enhancer for Veo 3">
    <meta property="og:image" content="https://github.com/CygRyu/veo3-prompt-gen/raw/main/Logo.png">
    <meta property="og:url" content="">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Veo 3 Prompt Generator">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Veo 3 Prompt Generator">
    <meta name="twitter:description" content="Prompt enhancer for Veo 3">
    <meta name="twitter:image" content="https://github.com/CygRyu/veo3-prompt-gen/raw/main/Logo.png">
    
    <!-- Apple Web App Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Veo 3 Gen">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            padding: 24px;
            max-width: 1200px;
            margin: 0 auto;
            line-height: 1.5;
            background-color: #ffffff;
            color: #1f2328;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 16px;
            }
        }
        
        h1 { 
            font-size: 32px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 32px;
            color: #1f2328;
            border-bottom: 1px solid #d1d9e0;
            padding-bottom: 16px;
        }
        
        h2 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #1f2328;
            padding-bottom: 8px;
            border-bottom: 1px solid #d1d9e0;
        }
        
        h3 {
            font-size: 16px;
            font-weight: 600;
            margin-top: 24px;
            margin-bottom: 12px;
            color: #656d76;
        }
        
        textarea, select, input[type="text"], input[type="range"] { 
            width: 100%;
            padding: 8px 12px;
            margin: 8px 0 16px;
            border: 1px solid #d1d9e0;
            border-radius: 6px;
            font-size: 16px;
            font-family: inherit;
            background-color: #ffffff;
            color: #1f2328;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        textarea:focus, select:focus, input[type="text"]:focus {
            outline: none;
            border-color: #0969da;
            box-shadow: 0 0 0 3px rgba(9, 105, 218, 0.1);
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
            font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace;
        }
        
        label { 
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 6px;
            display: block;
            color: #1f2328;
        }
        
        button { 
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            background-color: #1f883d;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.15s ease-in-out;
            font-family: inherit;
        }
        
        button:hover {
            background-color: #1a7f37;
        }
        
        button:active {
            background-color: #18752f;
        }
        
        .generate-btn {
            display: block;
            margin: 32px auto;
            font-size: 16px;
            padding: 12px 24px;
            background-color: #0969da;
        }
        
        .generate-btn:hover {
            background-color: #0860ca;
        }
        
        .generate-btn:active {
            background-color: #0757ba;
        }
        
        .copy-btn {
            background-color: #656d76;
            font-size: 12px;
            padding: 6px 12px;
            margin-left: 12px;
        }
        
        .copy-btn:hover {
            background-color: #4c545c;
        }
        
        .clear-btn {
            background-color: #cf222e;
            font-size: 14px;
            padding: 10px 20px;
            margin-right: 16px;
        }
        
        .clear-btn:hover {
            background-color: #a40e26;
        }
        
        .help-btn {
            background-color: #8250df;
            font-size: 12px;
            padding: 6px 12px;
            margin-left: 8px;
        }
        
        .help-btn:hover {
            background-color: #6f42c1;
        }
        
        #output { 
            margin-top: 16px;
            background: #f6f8fa;
            padding: 16px;
            border: 1px solid #d1d9e0;
            white-space: pre-wrap;
            border-radius: 6px;
            font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace;
            font-size: 13px;
            line-height: 1.45;
            color: #1f2328;
        }
        
        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        @media (max-width: 480px) {
            .output-header {
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
            }
            
            .copy-btn {
                margin-left: 0;
            }
        }
        
        .collapsible { 
            cursor: pointer;
            color: #0969da;
            text-decoration: none;
            margin-bottom: 16px;
            padding: 12px 0;
            display: block;
            font-size: 16px;
            font-weight: 600;
            border: none;
            background: none;
            text-align: left;
            width: 100%;
            transition: none;
        }
        
        .collapsible:hover {
            background: none;
            color: #0969da;
        }
        
        .advanced-section { 
            display: none;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }
        
        @media (min-width: 768px) {
            .form-grid-2 {
                grid-template-columns: 1fr 1fr;
            }
            
            .form-grid-3 {
                grid-template-columns: 1fr 1fr 1fr;
            }
        }
        
        .slider-container {
            margin-bottom: 20px;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .slider-value {
            font-weight: 500;
            color: #0969da;
            font-size: 12px;
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            height: 4px;
            border-radius: 2px;
            background: #d1d9e0;
            outline: none;
            margin: 0;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #0969da;
            cursor: pointer;
            border: 2px solid #ffffff;
            box-shadow: 0 0 0 1px rgba(9, 105, 218, 0.2);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #0969da;
            cursor: pointer;
            border: 2px solid #ffffff;
            box-shadow: 0 0 0 1px rgba(9, 105, 218, 0.2);
        }
        
        .section {
            background: #ffffff;
            padding: 24px;
            margin: 24px 0;
            border-radius: 6px;
            border: 1px solid #d1d9e0;
        }
        
        .hidden {
            display: none;
        }
        
        .error-message {
            background-color: #fff8f0;
            border: 1px solid #d1242f;
            border-radius: 6px;
            padding: 12px;
            margin: 16px 0;
            color: #d1242f;
            font-size: 14px;
        }
        
        .popup-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            z-index: 1000;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.4s ease-in-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            min-width: 200px;
        }
        
        .popup-notification.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .popup-notification.success {
            background-color: #1f883d;
        }
        
        .popup-notification.error {
            background-color: #cf222e;
        }
        
        .popup-notification.warning {
            background-color: #fb8500;
        }
        
        .footer {
            text-align: center;
            margin-top: 48px;
            padding-top: 24px;
            border-top: 1px solid #d1d9e0;
            color: #656d76;
            font-size: 14px;
        }
        
        .footer a {
            color: #0969da;
            text-decoration: none;
            margin: 0 12px;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        .gallery-placeholder {
            background: #f6f8fa;
            padding: 48px 24px;
            text-align: center;
            color: #656d76;
            font-style: italic;
            border-radius: 6px;
            border: 1px solid #d1d9e0;
        }
        
        .video-gallery {
            display: none;
        }
        
        .video-container {
            position: relative;
            width: 100%;
            margin-bottom: 16px;
        }
        
        .video-frame {
            width: 100%;
            height: 315px;
            border: none;
            border-radius: 6px;
        }
        
        /* Enhanced 16:9 aspect ratio for video frames */
        @media (max-width: 560px) {
            .video-frame {
                height: calc(100vw * 9 / 16 - 32px); /* Responsive 16:9 ratio on mobile */
            }
        }
        
        .video-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 16px;
        }
        
        .video-nav-btn {
            background-color: #0969da;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background-color 0.15s ease-in-out;
        }
        
        .video-nav-btn:hover {
            background-color: #0860ca;
        }
        
        .video-nav-btn:disabled {
            background-color: #656d76;
            cursor: not-allowed;
        }
        
        .video-counter {
            font-size: 14px;
            color: #656d76;
            font-weight: 500;
        }
        
        .video-title {
            margin-bottom: 12px;
            font-size: 16px;
            font-weight: 600;
            color: #1f2328;
        }

        /* Tab Navigation */
        .tab-container {
            margin-bottom: 24px;
        }
        
        .tab-nav {
            display: flex;
            border-bottom: 1px solid #d1d9e0;
            margin-bottom: 0;
        }
        
        .tab-button {
            background: none;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 500;
            color: #656d76;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.15s ease-in-out;
        }
        
        .tab-button.active {
            color: #0969da;
            border-bottom-color: #0969da;
        }
        
        .tab-button:hover {
            color: #0969da;
            background-color: #f6f8fa;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .tab-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }
        
        .tab-title {
            font-size: 24px;
            font-weight: 600;
            color: #1f2328;
            margin: 0;
        }
        
        /* Toggle Switch */
        .toggle-container {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 16px 0;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            border-radius: 34px;
            transition: .4s;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            border-radius: 50%;
            transition: .4s;
        }
        
        input:checked + .toggle-slider {
            background-color: #0969da;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        .toggle-labels {
            display: flex;
            gap: 8px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .toggle-label {
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.15s ease-in-out;
        }
        
        .toggle-label.active {
            background-color: #0969da;
            color: white;
        }
        
        .toggle-label.inactive {
            color: #656d76;
        }
        
        /* Action Buttons Container */
        .action-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 16px;
            margin: 32px 0;
        }
        
        @media (max-width: 480px) {
            .action-buttons {
                flex-direction: column;
                gap: 12px;
            }
            
            .clear-btn, .generate-btn {
                width: 100%;
                margin: 0;
            }
        }
        
        /* Help Modal */
        .help-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .help-modal-content {
            background-color: #ffffff;
            margin: 5% auto;
            padding: 24px;
            border-radius: 6px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .help-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid #d1d9e0;
        }
        
        .help-modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #1f2328;
            margin: 0;
        }
        
        .help-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #656d76;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .help-close:hover {
            color: #1f2328;
            background-color: #f6f8fa;
            border-radius: 4px;
        }
        
        .help-content {
            color: #1f2328;
            line-height: 1.6;
        }
        
        .help-content h4 {
            color: #0969da;
            margin-top: 20px;
            margin-bottom: 8px;
            font-size: 16px;
            font-weight: 600;
        }
        
        .help-content ul {
            margin-left: 20px;
            margin-bottom: 16px;
        }
        
        .help-content li {
            margin-bottom: 6px;
        }
        
        .help-content .example {
            background-color: #f6f8fa;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid #0969da;
            margin: 12px 0;
            font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace;
            font-size: 13px;
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #0d1117;
                color: #e6edf3;
            }
            
            h1, h2, .tab-title {
                color: #e6edf3;
                border-bottom-color: #30363d;
            }
            
            h3, label {
                color: #8d96a0;
            }
            
            textarea, select, input[type="text"] {
                background-color: #21262d;
                border-color: #30363d;
                color: #e6edf3;
            }
            
            textarea:focus, select:focus, input[type="text"]:focus {
                border-color: #1f6feb;
                box-shadow: 0 0 0 3px rgba(31, 111, 235, 0.1);
            }
            
            #output {
                background: #161b22;
                border-color: #30363d;
                color: #e6edf3;
            }
            
            .section {
                background: #0d1117;
                border-color: #30363d;
            }
            
            input[type="range"] {
                background: #30363d;
            }
            
            input[type="range"]::-webkit-slider-thumb {
                background: #1f6feb;
                border-color: #0d1117;
                box-shadow: 0 0 0 1px rgba(31, 111, 235, 0.2);
            }
            
            input[type="range"]::-moz-range-thumb {
                background: #1f6feb;
                border-color: #0d1117;
                box-shadow: 0 0 0 1px rgba(31, 111, 235, 0.2);
            }
            
            .gallery-placeholder {
                background: #161b22;
                color: #8d96a0;
                border-color: #30363d;
            }
            
            .footer {
                border-top-color: #30363d;
                color: #8d96a0;
            }
            
            .collapsible {
                color: #58a6ff;
            }
            
            .slider-value {
                color: #58a6ff;
            }
            
            .error-message {
                background-color: #2d1617;
                border-color: #f85149;
                color: #ffa198;
            }
            
            .generate-btn {
                background-color: #238636;
            }
            
            .generate-btn:hover {
                background-color: #2ea043;
            }
            
            .video-title {
                color: #e6edf3;
            }
            
            .video-counter {
                color: #8d96a0;
            }
            
            .tab-nav {
                border-bottom-color: #30363d;
            }
            
            .tab-button {
                color: #8d96a0;
            }
            
            .tab-button.active {
                color: #58a6ff;
                border-bottom-color: #58a6ff;
            }
            
            .tab-button:hover {
                color: #58a6ff;
                background-color: #161b22;
            }
            
            .toggle-label.active {
                background-color: #1f6feb;
            }
            
            .toggle-label.inactive {
                color: #8d96a0;
            }
            
            input:checked + .toggle-slider {
                background-color: #1f6feb;
            }
            
            .help-modal-content {
                background-color: #0d1117;
                border: 1px solid #30363d;
            }
            
            .help-modal-header {
                border-bottom-color: #30363d;
            }
            
            .help-modal-title {
                color: #e6edf3;
            }
            
            .help-close {
                color: #8d96a0;
            }
            
            .help-close:hover {
                color: #e6edf3;
                background-color: #161b22;
            }
            
            .help-content {
                color: #e6edf3;
            }
            
            .help-content h4 {
                color: #58a6ff;
            }
            
            .help-content .example {
                background-color: #161b22;
                border-left-color: #58a6ff;
            }
        }
    </style>
</head>
<body>
    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
        <h1 style="margin-bottom: 0;">🎬 Veo 3 Prompt Generator</h1>
        <div id="authPanel"></div>
    </div>

    <!-- Tab Navigation -->
    <div class="tab-container">
        <div class="tab-nav">
            <button class="tab-button active" onclick="switchTab('enhance')">✨ Enhance</button>
            <button class="tab-button" onclick="switchTab('remix')">🎛️ Remix</button>
        </div>
    </div>

    <!-- Enhance Tab Content -->
    <div id="enhanceTab" class="tab-content active">
        <div class="tab-header">
            <h2 class="tab-title">Enhance Your Prompt</h2>
            <button class="help-btn" onclick="showHelp('enhance')">❓ Help</button>
        </div>

        <!-- Basic Settings -->
        <div class="section">
            <h2>Basic Settings</h2>
            
            <label for="description">Your Prompt *</label>
            <textarea id="description" rows="4" placeholder="e.g. A cat flying through a futuristic city during a thunderstorm..."></textarea>

            <div class="form-grid form-grid-2">
                <div>
                    <label for="subject">Subject / Character Focus</label>
                    <input id="subject" type="text" placeholder="e.g. Cat, Robot, Samurai, Cloud, etc."/>
                </div>
                
                <div>
                    <label for="action">Action / Movement Type</label>
                    <select id="action">
                        <option value="">Auto Detect</option>
                        <option>Walking</option>
                        <option>Dancing</option>
                        <option>Flying</option>
                        <option>Transformation</option>
                        <option>Interaction</option>
                        <option>Running</option>
                        <option>Jumping</option>
                        <option>Swimming</option>
                        <option>Climbing</option>
                    </select>
                </div>
            </div>

            <label for="style">Video Style</label>
            <select id="style">
                <option>Auto Detect (AI chooses best style)</option>
                <option>Cinematic / Hollywood Film</option>
                <option>Realistic Live Action</option>
                <option>Aerial Cinematic Drone Shot</option>
                <option>Time-lapse / Slow Motion</option>
                <option>Film Noir / Black-and-White</option>
                <option>Analog / Film Grain</option>
                <option>IMAX Look</option>
                <option>Documentary Style</option>
                <option>Natural History / Wildlife</option>
                <option>Found Footage / Handheld Cam</option>
                <option>News Report Style</option>
                <option>Surveillance Footage Look</option>
                <option>Dreamscape / Surreal</option>
                <option>Fantasy / Magic Realism</option>
                <option>Oil Painting / Watercolor</option>
                <option>Sketch / Ink Drawing</option>
                <option>Abstract / Experimental</option>
                <option>Double Exposure / Visual Metaphor</option>
                <option>Stylized 2D Animation / Anime-like</option>
                <option>Cartoon 2D</option>
                <option>Cute Cartoon / Kawaii Style</option>
                <option>Cartoon 3D / Pixar-like</option>
                <option>Stop Motion Look</option>
                <option>Claymation Style</option>
                <option>Motion Graphic / Minimal Vector</option>
                <option>Retro 80s / VHS Look</option>
                <option>Cyberpunk / Futuristic</option>
                <option>Noir Detective Style</option>
                <option>Western / Cowboy Film</option>
                <option>Horror (grainy, eerie lighting)</option>
                <option>Tiny World / Tilt Shift</option>
                <option>Microscopic View / Science-Lab Look</option>
                <option>Macro Lens Simulation</option>
                <option>Cinematic Portrait Mode</option>
                <option>Bokeh-Focused Depth-of-Field</option>
                <option>Overexposed / Underexposed Look</option>
                <option>Infrared or Thermal Cam Simulation</option>
                <option>Isometric / Diorama</option>
                <option>Fantasy Landscapes</option>
                <option>Post-Apocalyptic World</option>
                <option>Urban Street Aesthetic</option>
                <option>Studio Look (ASMR/Product Videos)</option>
                <option>Video Game Gameplay</option>
            </select>
        </div>

        <!-- Video Tone/Genre -->
        <div class="section">
            <h2>Video Tone/Genre</h2>
            
            <div class="form-grid form-grid-2">
                <div>
                    <label for="generalTone">General Tone</label>
                    <select id="generalTone" onchange="updateSubTones('enhance')">
                        <option value="">Auto Detect</option>
                        <option value="emotional">Emotional Tones</option>
                        <option value="suspense">Suspense & Thriller Tones</option>
                        <option value="action">Action & Adventure Tones</option>
                        <option value="artistic">Artistic & Creative Tones</option>
                        <option value="documentary">Documentary & Realistic Tones</option>
                        <option value="fantasy">Fantasy & Sci-Fi Tones</option>
                        <option value="social">Social & Cultural Tones</option>
                        <option value="unique">Unique/Niche Tones</option>
                    </select>
                </div>

                <div>
                    <label for="subTone">Specific Tone</label>
                    <select id="subTone">
                        <option value="">Auto Detect</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Technical Settings -->
        <div class="section">
            <h2>Technical Settings</h2>
            
            <div class="form-grid form-grid-2">
                <div>
                    <label for="aspectRatio">Aspect Ratio</label>
                    <select id="aspectRatio">
                        <option value="16:9">16:9 (Widescreen)</option>
                        <option value="9:16">9:16 (Vertical)</option>
                        <option value="1:1">1:1 (Square)</option>
                        <option value="4:3">4:3 (Standard)</option>
                        <option value="21:9">21:9 (Ultra-wide)</option>
                    </select>
                </div>

                <div>
                    <label for="duration">Duration</label>
                    <input id="duration" type="text" value="8 seconds" readonly style="background-color: #f6f8fa; color: #656d76;"/>
                </div>
            </div>
        </div>

        <!-- Advanced Parameters -->
        <button class="collapsible" onclick="toggleAdvanced('enhance')">+ Advanced Parameters (Optional)</button>
        <div id="enhanceAdvanced" class="advanced-section">
            <div class="section">
                <!-- Camera Settings -->
                <h3>Camera Settings</h3>
                <div class="form-grid form-grid-3">
                    <div>
                        <label for="cameraMovement">Camera Movement</label>
                        <select id="cameraMovement">
                            <option>Auto Detect</option>
                            <option>Static</option>
                            <option>Pan Left/Right</option>
                            <option>Zoom In/Out</option>
                            <option>Dolly Forward/Back</option>
                            <option>Steadycam</option>
                            <option>Handheld</option>
                            <option>Orbital</option>
                            <option>Tracking Shot</option>
                            <option>Crane</option>
                            <option>Drone</option>
                        </select>
                    </div>

                    <div>
                        <label for="cameraLevel">Camera Level</label>
                        <select id="cameraLevel">
                            <option>Auto Detect</option>
                            <option>Eye Level</option>
                            <option>Low Angle</option>
                            <option>High Angle</option>
                            <option>Dutch Angle</option>
                            <option>Overhead</option>
                            <option>Point of View</option>
                        </select>
                    </div>

                    <div>
                        <label for="lensType">Lens Type</label>
                        <select id="lensType">
                            <option>Auto Detect</option>
                            <option>Standard (50mm)</option>
                            <option>Wide Angle (24mm)</option>
                            <option>Telephoto (85mm+)</option>
                            <option>Fisheye</option>
                            <option>Anamorphic</option>
                            <option>Macro</option>
                        </select>
                    </div>
                </div>

                <!-- Visual Settings -->
                <h3>Visual Settings</h3>
                <div class="form-grid form-grid-2">
                    <div>
                        <label for="depthOfField">Depth of Field</label>
                        <select id="depthOfField">
                            <option>Auto Detect</option>
                            <option>Shallow</option>
                            <option>Medium</option>
                            <option>Deep</option>
                        </select>
                    </div>

                    <div>
                        <label for="lighting">Lighting Preference</label>
                        <select id="lighting">
                            <option>Auto Detect</option>
                            <option>Natural</option>
                            <option>Dramatic</option>
                            <option>Soft</option>
                            <option>Harsh</option>
                            <option>Golden Hour</option>
                            <option>Blue Hour</option>
                            <option>Neon</option>
                            <option>Candlelit</option>
                            <option>Studio Lighting</option>
                        </select>
                    </div>
                </div>

                <!-- Visual Effects Sliders -->
                <h3>Visual Effects</h3>
                <div class="slider-container">
                    <div class="slider-label">
                        <label for="filmGrain">Film Grain</label>
                        <span class="slider-value" id="filmGrainValue">0%</span>
                    </div>
                    <input type="range" id="filmGrain" min="0" max="100" value="0" oninput="updateSliderValue('filmGrain')">
                </div>

                <div class="slider-container">
                    <div class="slider-label">
                        <label for="chromaticAberration">Chromatic Aberration</label>
                        <span class="slider-value" id="chromaticAberrationValue">0%</span>
                    </div>
                    <input type="range" id="chromaticAberration" min="0" max="100" value="0" oninput="updateSliderValue('chromaticAberration')">
                </div>

                <!-- Environment & Atmosphere -->
                <h3>Environment & Atmosphere</h3>
                <div class="form-grid form-grid-3">
                    <div>
                        <label for="environment">Environment/Setting</label>
                        <select id="environment">
                            <option>Auto Detect</option>
                            <option>Indoor</option>
                            <option>Outdoor</option>
                            <option>Urban</option>
                            <option>Rural</option>
                            <option>Fantasy World</option>
                            <option>Space</option>
                            <option>Underwater</option>
                            <option>Desert</option>
                            <option>Forest</option>
                            <option>City</option>
                        </select>
                    </div>

                    <div>
                        <label for="colorPalette">Color Palette</label>
                        <select id="colorPalette">
                            <option>Auto Detect</option>
                            <option>Warm Tones</option>
                            <option>Cool Tones</option>
                            <option>Monochrome</option>
                            <option>Vibrant</option>
                            <option>Muted</option>
                            <option>Neon</option>
                            <option>Pastel</option>
                            <option>High Contrast</option>
                        </select>
                    </div>

                    <div>
                        <label for="weather">Weather/Atmosphere</label>
                        <select id="weather">
                            <option>Auto Detect</option>
                            <option>Sunny</option>
                            <option>Cloudy</option>
                            <option>Rainy</option>
                            <option>Foggy</option>
                            <option>Stormy</option>
                            <option>Snowy</option>
                            <option>Windy</option>
                            <option>Misty</option>
                            <option>Clear</option>
                        </select>
                    </div>

                    <div>
                        <label for="timeOfDay">Time of Day</label>
                        <select id="timeOfDay">
                            <option>Auto Detect</option>
                            <option>Dawn</option>
                            <option>Morning</option>
                            <option>Midday</option>
                            <option>Afternoon</option>
                            <option>Dusk</option>
                            <option>Night</option>
                            <option>Midnight</option>
                        </select>
                    </div>

                    <div>
                        <label for="motionIntensity">Motion Intensity</label>
                        <select id="motionIntensity">
                            <option>Auto Detect</option>
                            <option>Subtle</option>
                            <option>Moderate</option>
                            <option>Dynamic</option>
                            <option>Explosive</option>
                            <option>Graceful</option>
                        </select>
                    </div>

                    <div>
                        <label for="moodEmotion">Mood/Emotion</label>
                        <select id="moodEmotion">
                            <option>Auto Detect</option>
                            <option>Happy</option>
                            <option>Mysterious</option>
                            <option>Tense</option>
                            <option>Peaceful</option>
                            <option>Energetic</option>
                            <option>Melancholic</option>
                            <option>Triumphant</option>
                            <option>Romantic</option>
                        </select>
                    </div>
                </div>

                <!-- Dialogue/Text Overlay -->
                <label for="dialogue">Dialogue/Text Overlay (Optional)</label>
                <textarea id="dialogue" rows="2" placeholder="Enter any dialogue or text elements to include..."></textarea>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="clear-btn" onclick="clearForm('enhance')">🗑️ Clear All</button>
            <button class="generate-btn" onclick="generatePrompt()">✨ Enhance Prompt</button>
        </div>

        <!-- Output Section -->
        <div id="enhanceOutputSection" class="hidden">
            <div class="output-header">
                <h2>Enhanced Prompt</h2>
                <button class="copy-btn" onclick="copyPrompt('enhanceOutput')">📋 Copy Prompt</button>
            </div>
            <div id="enhanceOutput"></div>
        </div>

        <!-- Sample Gallery -->
        <div class="section">
            <button class="collapsible" onclick="toggleGallery('enhance')">+ Sample Gallery</button>
            <div id="enhanceVideoGallery" class="video-gallery">
                <div class="video-container">
                    <div class="video-title" id="enhanceVideoTitle">Sample Video 1</div>
                    <iframe id="enhanceVideoFrame" class="video-frame" src="about:blank" allowfullscreen></iframe>
                </div>
                <div class="video-navigation">
                    <button class="video-nav-btn" id="enhancePrevBtn" onclick="previousVideo('enhance')">← Previous</button>
                    <span class="video-counter" id="enhanceVideoCounter">1 / 3</span>
                    <button class="video-nav-btn" id="enhanceNextBtn" onclick="nextVideo('enhance')">Next →</button>
                </div>
            </div>
            <div id="enhanceGalleryPlaceholder" class="gallery-placeholder">
                Click on expand button above to view sample videos
            </div>
        </div>
    </div>

    <!-- Remix Tab Content -->
    <div id="remixTab" class="tab-content">
        <div class="tab-header">
            <h2 class="tab-title">Remix Existing Prompt</h2>
            <button class="help-btn" onclick="showHelp('remix')">❓ Help</button>
        </div>

        <!-- Remix Input Section -->
        <div class="section">
            <h2>Original Prompt & Variations</h2>
            
            <label for="originalPrompt">Original Prompt *</label>
            <textarea id="originalPrompt" rows="6" placeholder="Paste your existing prompt here... (can be any length from simple to detailed)"></textarea>

            <label for="variationInstructions">How to Vary This Prompt *</label>
            <textarea id="variationInstructions" rows="4" placeholder="e.g. Make the creature a giant lobster instead, and the view is from a drone, the time of day is dusk, the tone is chilling and gritty. And there is a deep old man voice narrating that says 'Earth is facing her end of time..'"></textarea>

            <!-- Simple/Advanced Toggle -->
            <div class="toggle-container">
                <span class="toggle-labels">
                    <span class="toggle-label active" id="simpleLabel">Simple</span>
                    <span class="toggle-label inactive" id="advancedLabel">Advanced</span>
                </span>
                <label class="toggle-switch">
                    <input type="checkbox" id="remixModeToggle" onchange="toggleRemixMode()">
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>

        <!-- Advanced Remix Parameters (Hidden by default) -->
        <div id="remixAdvancedSection" class="hidden">
            <!-- Basic Settings -->
            <div class="section">
                <h2>Basic Settings</h2>
                
                <div class="form-grid form-grid-2">
                    <div>
                        <label for="remixSubject">Subject / Character Focus</label>
                        <input id="remixSubject" type="text" placeholder="e.g. Cat, Robot, Samurai, Cloud, etc."/>
                    </div>
                    
                    <div>
                        <label for="remixAction">Action / Movement Type</label>
                        <select id="remixAction">
                            <option value="">Auto Detect</option>
                            <option>Walking</option>
                            <option>Dancing</option>
                            <option>Flying</option>
                            <option>Transformation</option>
                            <option>Interaction</option>
                            <option>Running</option>
                            <option>Jumping</option>
                            <option>Swimming</option>
                            <option>Climbing</option>
                        </select>
                    </div>
                </div>

                <label for="remixStyle">Video Style</label>
                <select id="remixStyle">
                    <option>Auto Detect (AI chooses best style)</option>
                    <option>Cinematic / Hollywood Film</option>
                    <option>Realistic Live Action</option>
                    <option>Aerial Cinematic Drone Shot</option>
                    <option>Time-lapse / Slow Motion</option>
                    <option>Film Noir / Black-and-White</option>
                    <option>Analog / Film Grain</option>
                    <option>IMAX Look</option>
                    <option>Documentary Style</option>
                    <option>Natural History / Wildlife</option>
                    <option>Found Footage / Handheld Cam</option>
                    <option>News Report Style</option>
                    <option>Surveillance Footage Look</option>
                    <option>Dreamscape / Surreal</option>
                    <option>Fantasy / Magic Realism</option>
                    <option>Oil Painting / Watercolor</option>
                    <option>Sketch / Ink Drawing</option>
                    <option>Abstract / Experimental</option>
                    <option>Double Exposure / Visual Metaphor</option>
                    <option>Stylized 2D Animation / Anime-like</option>
                    <option>Cartoon 2D</option>
                    <option>Cute Cartoon / Kawaii Style</option>
                    <option>Cartoon 3D / Pixar-like</option>
                    <option>Stop Motion Look</option>
                    <option>Claymation Style</option>
                    <option>Motion Graphic / Minimal Vector</option>
                    <option>Retro 80s / VHS Look</option>
                    <option>Cyberpunk / Futuristic</option>
                    <option>Noir Detective Style</option>
                    <option>Western / Cowboy Film</option>
                    <option>Horror (grainy, eerie lighting)</option>
                    <option>Tiny World / Tilt Shift</option>
                    <option>Microscopic View / Science-Lab Look</option>
                    <option>Macro Lens Simulation</option>
                    <option>Cinematic Portrait Mode</option>
                    <option>Bokeh-Focused Depth-of-Field</option>
                    <option>Overexposed / Underexposed Look</option>
                    <option>Infrared or Thermal Cam Simulation</option>
                    <option>Isometric / Diorama</option>
                    <option>Fantasy Landscapes</option>
                    <option>Post-Apocalyptic World</option>
                    <option>Urban Street Aesthetic</option>
                    <option>Studio Look (ASMR/Product Videos)</option>
                    <option>Video Game Gameplay</option>
                </select>
            </div>

            <!-- Video Tone/Genre -->
            <div class="section">
                <h2>Video Tone/Genre</h2>
                
                <div class="form-grid form-grid-2">
                    <div>
                        <label for="remixGeneralTone">General Tone</label>
                        <select id="remixGeneralTone" onchange="updateSubTones('remix')">
                            <option value="">Auto Detect</option>
                            <option value="emotional">Emotional Tones</option>
                            <option value="suspense">Suspense & Thriller Tones</option>
                            <option value="action">Action & Adventure Tones</option>
                            <option value="artistic">Artistic & Creative Tones</option>
                            <option value="documentary">Documentary & Realistic Tones</option>
                            <option value="fantasy">Fantasy & Sci-Fi Tones</option>
                            <option value="social">Social & Cultural Tones</option>
                            <option value="unique">Unique/Niche Tones</option>
                        </select>
                    </div>

                    <div>
                        <label for="remixSubTone">Specific Tone</label>
                        <select id="remixSubTone">
                            <option value="">Auto Detect</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Technical Settings -->
            <div class="section">
                <h2>Technical Settings</h2>
                
                <div class="form-grid form-grid-2">
                    <div>
                        <label for="remixAspectRatio">Aspect Ratio</label>
                        <select id="remixAspectRatio">
                            <option value="16:9">16:9 (Widescreen)</option>
                            <option value="9:16">9:16 (Vertical)</option>
                            <option value="1:1">1:1 (Square)</option>
                            <option value="4:3">4:3 (Standard)</option>
                            <option value="21:9">21:9 (Ultra-wide)</option>
                        </select>
                    </div>

                    <div>
                        <label for="remixDuration">Duration</label>
                        <input id="remixDuration" type="text" value="8 seconds" readonly style="background-color: #f6f8fa; color: #656d76;"/>
                    </div>
                </div>
            </div>

            <!-- Advanced Parameters -->
            <button class="collapsible" onclick="toggleAdvanced('remix')">+ Advanced Parameters (Optional)</button>
            <div id="remixAdvanced" class="advanced-section">
                <div class="section">
                    <!-- Camera Settings -->
                    <h3>Camera Settings</h3>
                    <div class="form-grid form-grid-3">
                        <div>
                            <label for="remixCameraMovement">Camera Movement</label>
                            <select id="remixCameraMovement">
                                <option>Auto Detect</option>
                                <option>Static</option>
                                <option>Pan Left/Right</option>
                                <option>Zoom In/Out</option>
                                <option>Dolly Forward/Back</option>
                                <option>Steadycam</option>
                                <option>Handheld</option>
                                <option>Orbital</option>
                                <option>Tracking Shot</option>
                                <option>Crane</option>
                                <option>Drone</option>
                            </select>
                        </div>

                        <div>
                            <label for="remixCameraLevel">Camera Level</label>
                            <select id="remixCameraLevel">
                                <option>Auto Detect</option>
                                <option>Eye Level</option>
                                <option>Low Angle</option>
                                <option>High Angle</option>
                                <option>Dutch Angle</option>
                                <option>Overhead</option>
                                <option>Point of View</option>
                            </select>
                        </div>

                        <div>
                            <label for="remixLensType">Lens Type</label>
                            <select id="remixLensType">
                                <option>Auto Detect</option>
                                <option>Standard (50mm)</option>
                                <option>Wide Angle (24mm)</option>
                                <option>Telephoto (85mm+)</option>
                                <option>Fisheye</option>
                                <option>Anamorphic</option>
                                <option>Macro</option>
                            </select>
                        </div>
                    </div>

                    <!-- Visual Settings -->
                    <h3>Visual Settings</h3>
                    <div class="form-grid form-grid-2">
                        <div>
                            <label for="remixDepthOfField">Depth of Field</label>
                            <select id="remixDepthOfField">
                                <option>Auto Detect</option>
                                <option>Shallow</option>
                                <option>Medium</option>
                                <option>Deep</option>
                            </select>
                        </div>

                        <div>
                            <label for="remixLighting">Lighting Preference</label>
                            <select id="remixLighting">
                                <option>Auto Detect</option>
                                <option>Natural</option>
                                <option>Dramatic</option>
                                <option>Soft</option>
                                <option>Harsh</option>
                                <option>Golden Hour</option>
                                <option>Blue Hour</option>
                                <option>Neon</option>
                                <option>Candlelit</option>
                                <option>Studio Lighting</option>
                            </select>
                        </div>
                    </div>

                    <!-- Visual Effects Sliders -->
                    <h3>Visual Effects</h3>
                    <div class="slider-container">
                        <div class="slider-label">
                            <label for="remixFilmGrain">Film Grain</label>
                            <span class="slider-value" id="remixFilmGrainValue">0%</span>
                        </div>
                        <input type="range" id="remixFilmGrain" min="0" max="100" value="0" oninput="updateSliderValue('remixFilmGrain')">
                    </div>

                    <div class="slider-container">
                        <div class="slider-label">
                            <label for="remixChromaticAberration">Chromatic Aberration</label>
                            <span class="slider-value" id="remixChromaticAberrationValue">0%</span>
                        </div>
                        <input type="range" id="remixChromaticAberration" min="0" max="100" value="0" oninput="updateSliderValue('remixChromaticAberration')">
                    </div>

                    <!-- Environment & Atmosphere -->
                    <h3>Environment & Atmosphere</h3>
                    <div class="form-grid form-grid-3">
                        <div>
                            <label for="remixEnvironment">Environment/Setting</label>
                            <select id="remixEnvironment">
                                <option>Auto Detect</option>
                                <option>Indoor</option>
                                <option>Outdoor</option>
                                <option>Urban</option>
                                <option>Rural</option>
                                <option>Fantasy World</option>
                                <option>Space</option>
                                <option>Underwater</option>
                                <option>Desert</option>
                                <option>Forest</option>
                                <option>City</option>
                            </select>
                        </div>

                        <div>
                            <label for="remixColorPalette">Color Palette</label>
                            <select id="remixColorPalette">
                                <option>Auto Detect</option>
                                <option>Warm Tones</option>
                                <option>Cool Tones</option>
                                <option>Monochrome</option>
                                <option>Vibrant</option>
                                <option>Muted</option>
                                <option>Neon</option>
                                <option>Pastel</option>
                                <option>High Contrast</option>
                            </select>
                        </div>

                        <div>
                            <label for="remixWeather">Weather/Atmosphere</label>
                            <select id="remixWeather">
                                <option>Auto Detect</option>
                                <option>Sunny</option>
                                <option>Cloudy</option>
                                <option>Rainy</option>
                                <option>Foggy</option>
                                <option>Stormy</option>
                                <option>Snowy</option>
                                <option>Windy</option>
                                <option>Misty</option>
                                <option>Clear</option>
                            </select>
                        </div>

                        <div>
                            <label for="remixTimeOfDay">Time of Day</label>
                            <select id="remixTimeOfDay">
                                <option>Auto Detect</option>
                                <option>Dawn</option>
                                <option>Morning</option>
                                <option>Midday</option>
                                <option>Afternoon</option>
                                <option>Dusk</option>
                                <option>Night</option>
                                <option>Midnight</option>
                            </select>
                        </div>

                        <div>
                            <label for="remixMotionIntensity">Motion Intensity</label>
                            <select id="remixMotionIntensity">
                                <option>Auto Detect</option>
                                <option>Subtle</option>
                                <option>Moderate</option>
                                <option>Dynamic</option>
                                <option>Explosive</option>
                                <option>Graceful</option>
                            </select>
                        </div>

                        <div>
                            <label for="remixMoodEmotion">Mood/Emotion</label>
                            <select id="remixMoodEmotion">
                                <option>Auto Detect</option>
                                <option>Happy</option>
                                <option>Mysterious</option>
                                <option>Tense</option>
                                <option>Peaceful</option>
                                <option>Energetic</option>
                                <option>Melancholic</option>
                                <option>Triumphant</option>
                                <option>Romantic</option>
                            </select>
                        </div>
                    </div>

                    <!-- Dialogue/Text Overlay -->
                    <label for="remixDialogue">Dialogue/Text Overlay (Optional)</label>
                    <textarea id="remixDialogue" rows="2" placeholder="Enter any dialogue or text elements to include..."></textarea>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="clear-btn" onclick="clearForm('remix')">🗑️ Clear All</button>
            <button class="generate-btn" onclick="remixPrompt()">🎛️ Remix Prompt</button>
        </div>

        <!-- Output Section -->
        <div id="remixOutputSection" class="hidden">
            <div class="output-header">
                <h2>Remixed Prompt</h2>
                <button class="copy-btn" onclick="copyPrompt('remixOutput')">📋 Copy Prompt</button>
            </div>
            <div id="remixOutput"></div>
        </div>

        <!-- Sample Gallery -->
        <div class="section">
            <button class="collapsible" onclick="toggleGallery('remix')">+ Sample Gallery</button>
            <div id="remixVideoGallery" class="video-gallery">
                <div class="video-container">
                    <div class="video-title" id="remixVideoTitle">Sample Video 1</div>
                    <iframe id="remixVideoFrame" class="video-frame" src="about:blank" allowfullscreen></iframe>
                </div>
                <div class="video-navigation">
                    <button class="video-nav-btn" id="remixPrevBtn" onclick="previousVideo('remix')">← Previous</button>
                    <span class="video-counter" id="remixVideoCounter">1 / 3</span>
                    <button class="video-nav-btn" id="remixNextBtn" onclick="nextVideo('remix')">Next →</button>
                </div>
            </div>
            <div id="remixGalleryPlaceholder" class="gallery-placeholder">
                Click on expand button above to view sample videos
            </div>
        </div>
    </div>

    <!-- Help Modals -->
    <div id="helpModal" class="help-modal">
        <div class="help-modal-content">
            <div class="help-modal-header">
                <h3 class="help-modal-title" id="helpModalTitle">Help</h3>
                <button class="help-close" onclick="closeHelp()">&times;</button>
            </div>
            <div class="help-content" id="helpModalContent">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p>Developed by <strong>CygRyu</strong></p>
        <div>
            <a href="https://ko-fi.com/cygryu" target="_blank">☕ Ko-Fi</a>
            <a href="https://www.paypal.com/paypalme/sofiansu?country.x=ID&locale.x=en_US" target="_blank">💳 PayPal</a>
        </div>
    </div>

<!-- Firebase Core SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

    <script>
        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Tone options mapping
        const toneOptions = {
            emotional: ['Happy/Joyful', 'Funny/Comedic', 'Heartwarming', 'Sad/Melancholic', 'Romantic', 'Inspirational/Motivational', 'Peaceful/Calming', 'Nostalgic'],
            suspense: ['Scary/Horror', 'Mysterious', 'Suspenseful', 'Dramatic', 'Dark', 'Thriller'],
            action: ['Epic/Heroic', 'Action-Packed', 'Adventurous', 'Energetic'],
            artistic: ['Dreamy/Surreal', 'Artistic/Aesthetic', 'Experimental', 'Minimalist'],
            documentary: ['Documentary', 'Realistic', 'Gritty', 'Professional'],
            fantasy: ['Magical', 'Futuristic', 'Fantasy'],
            social: ['Trendy/Hip', 'Retro/Vintage', 'Urban', 'Rural/Country'],
            unique: ['Quirky/Weird', 'Luxurious', 'Cozy', 'Badass', 'Awkward', 'Chaotic', 'Zen/Spiritual']
        };

        // Video gallery data with your YouTube video
        const videoData = [
            {
                title: "Veo 3 Showcase Video - AI Video Generation Demo",
                url: "https://www.youtube.com/embed/MK2sbQper4M?rel=0"
            },
            {
                title: "Sample Video 2 - Advanced Settings Demo",
                url: "https://www.youtube.com/embed/PLACEHOLDER_VIDEO_ID_2"
            },
            {
                title: "Sample Video 3 - Creative Style Examples",
                url: "https://www.youtube.com/embed/PLACEHOLDER_VIDEO_ID_3"
            }
        ];

        let currentVideoIndex = {
            enhance: 0,
            remix: 0
        };

        // Tab Management
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // Add active class to selected tab button
            event.target.classList.add('active');
        }

        // Remix Mode Toggle
        function toggleRemixMode() {
            const toggle = document.getElementById('remixModeToggle');
            const simpleLabel = document.getElementById('simpleLabel');
            const advancedLabel = document.getElementById('advancedLabel');
            const advancedSection = document.getElementById('remixAdvancedSection');
            
            if (toggle.checked) {
                // Advanced mode
                simpleLabel.classList.remove('active');
                simpleLabel.classList.add('inactive');
                advancedLabel.classList.remove('inactive');
                advancedLabel.classList.add('active');
                advancedSection.classList.remove('hidden');
            } else {
                // Simple mode
                advancedLabel.classList.remove('active');
                advancedLabel.classList.add('inactive');
                simpleLabel.classList.remove('inactive');
                simpleLabel.classList.add('active');
                advancedSection.classList.add('hidden');
            }
        }

        function toggleAdvanced(tabName) {
            const adv = document.getElementById(tabName + "Advanced");
            const button = event.target;
            
            if (adv.style.display === "none" || adv.style.display === "") {
                adv.style.display = "block";
                button.innerHTML = "- Advanced Parameters (Optional)";
            } else {
                adv.style.display = "none";
                button.innerHTML = "+ Advanced Parameters (Optional)";
            }
        }

        function toggleGallery(tabName) {
            const gallery = document.getElementById(tabName + "VideoGallery");
            const placeholder = document.getElementById(tabName + "GalleryPlaceholder");
            const button = event.target;
            
            if (gallery.style.display === "none" || gallery.style.display === "") {
                gallery.style.display = "block";
                placeholder.style.display = "none";
                button.innerHTML = "- Sample Gallery";
                loadVideo(tabName, currentVideoIndex[tabName]);
            } else {
                gallery.style.display = "none";
                placeholder.style.display = "block";
                button.innerHTML = "+ Sample Gallery";
            }
        }

        function loadVideo(tabName, index) {
            if (index >= 0 && index < videoData.length) {
                const video = videoData[index];
                document.getElementById(tabName + "VideoFrame").src = video.url;
                document.getElementById(tabName + "VideoTitle").textContent = video.title;
                document.getElementById(tabName + "VideoCounter").textContent = `${index + 1} / ${videoData.length}`;
                
                // Update navigation buttons
                document.getElementById(tabName + "PrevBtn").disabled = index === 0;
                document.getElementById(tabName + "NextBtn").disabled = index === videoData.length - 1;
                
                currentVideoIndex[tabName] = index;
            }
        }

        function previousVideo(tabName) {
            if (currentVideoIndex[tabName] > 0) {
                loadVideo(tabName, currentVideoIndex[tabName] - 1);
            }
        }

        function nextVideo(tabName) {
            if (currentVideoIndex[tabName] < videoData.length - 1) {
                loadVideo(tabName, currentVideoIndex[tabName] + 1);
            }
        }

        function updateSubTones(tabName) {
            const prefix = tabName === 'enhance' ? '' : 'remix';
            const generalToneId = prefix ? prefix + 'GeneralTone' : 'generalTone';
            const subToneId = prefix ? prefix + 'SubTone' : 'subTone';
            
            const generalTone = document.getElementById(generalToneId).value;
            const subToneSelect = document.getElementById(subToneId);
            
            // Clear existing options
            subToneSelect.innerHTML = '<option value="">Auto Detect</option>';
            
            if (generalTone && toneOptions[generalTone]) {
                toneOptions[generalTone].forEach(tone => {
                    const option = document.createElement('option');
                    option.value = tone;
                    option.textContent = tone;
                    subToneSelect.appendChild(option);
                });
            }
        }

        function updateSliderValue(sliderId) {
            const slider = document.getElementById(sliderId);
            const valueSpan = document.getElementById(sliderId + 'Value');
            valueSpan.textContent = slider.value + '%';
        }

        function showError(message) {
            // Remove existing error messages
            const existingErrors = document.querySelectorAll('.error-message');
            existingErrors.forEach(error => error.remove());
            
            // Create new error message
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = message;
            
            // Insert in current active tab
            const activeTab = document.querySelector('.tab-content.active');
            const firstSection = activeTab.querySelector('.section');
            firstSection.parentNode.insertBefore(errorDiv, firstSection.nextSibling);
            
            // Scroll to error
            errorDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        // Clear form function
        function clearForm(tabName) {
            if (confirm('Are you sure you want to clear all fields? This action cannot be undone.')) {
                if (tabName === 'enhance') {
                    // Clear enhance form
                    document.getElementById('description').value = '';
                    document.getElementById('subject').value = '';
                    document.getElementById('action').selectedIndex = 0;
                    document.getElementById('style').selectedIndex = 0;
                    document.getElementById('generalTone').selectedIndex = 0;
                    document.getElementById('subTone').selectedIndex = 0;
                    document.getElementById('aspectRatio').selectedIndex = 0;
                    document.getElementById('cameraMovement').selectedIndex = 0;
                    document.getElementById('cameraLevel').selectedIndex = 0;
                    document.getElementById('lensType').selectedIndex = 0;
                    document.getElementById('depthOfField').selectedIndex = 0;
                    document.getElementById('lighting').selectedIndex = 0;
                    document.getElementById('filmGrain').value = 0;
                    updateSliderValue('filmGrain');
                    document.getElementById('chromaticAberration').value = 0;
                    updateSliderValue('chromaticAberration');
                    document.getElementById('environment').selectedIndex = 0;
                    document.getElementById('colorPalette').selectedIndex = 0;
                    document.getElementById('weather').selectedIndex = 0;
                    document.getElementById('timeOfDay').selectedIndex = 0;
                    document.getElementById('motionIntensity').selectedIndex = 0;
                    document.getElementById('moodEmotion').selectedIndex = 0;
                    document.getElementById('dialogue').value = '';
                    
                    // Hide output section
                    document.getElementById('enhanceOutputSection').classList.add('hidden');
                } else {
                    // Clear remix form
                    document.getElementById('originalPrompt').value = '';
                    document.getElementById('variationInstructions').value = '';
                    
                    // Reset toggle to simple mode
                    document.getElementById('remixModeToggle').checked = false;
                    toggleRemixMode();
                    
                    // Clear advanced fields
                    document.getElementById('remixSubject').value = '';
                    document.getElementById('remixAction').selectedIndex = 0;
                    document.getElementById('remixStyle').selectedIndex = 0;
                    document.getElementById('remixGeneralTone').selectedIndex = 0;
                    document.getElementById('remixSubTone').selectedIndex = 0;
                    document.getElementById('remixAspectRatio').selectedIndex = 0;
                    document.getElementById('remixCameraMovement').selectedIndex = 0;
                    document.getElementById('remixCameraLevel').selectedIndex = 0;
                    document.getElementById('remixLensType').selectedIndex = 0;
                    document.getElementById('remixDepthOfField').selectedIndex = 0;
                    document.getElementById('remixLighting').selectedIndex = 0;
                    document.getElementById('remixFilmGrain').value = 0;
                    updateSliderValue('remixFilmGrain');
                    document.getElementById('remixChromaticAberration').value = 0;
                    updateSliderValue('remixChromaticAberration');
                    document.getElementById('remixEnvironment').selectedIndex = 0;
                    document.getElementById('remixColorPalette').selectedIndex = 0;
                    document.getElementById('remixWeather').selectedIndex = 0;
                    document.getElementById('remixTimeOfDay').selectedIndex = 0;
                    document.getElementById('remixMotionIntensity').selectedIndex = 0;
                    document.getElementById('remixMoodEmotion').selectedIndex = 0;
                    document.getElementById('remixDialogue').value = '';
                    
                    // Hide output section
                    document.getElementById('remixOutputSection').classList.add('hidden');
                }
                
                // Remove any existing error messages
                const existingErrors = document.querySelectorAll('.error-message');
                existingErrors.forEach(error => error.remove());
            }
        }

        // Help modal functions
        function showHelp(tabName) {
            const modal = document.getElementById('helpModal');
            const title = document.getElementById('helpModalTitle');
            const content = document.getElementById('helpModalContent');
            
            if (tabName === 'enhance') {
                title.textContent = 'Enhance Tab - Best Practices';
                content.innerHTML = `
                    <h4>🎯 What is the Enhance Feature?</h4>
                    <p>The Enhance feature transforms your basic prompt idea into a detailed, professional-quality Veo 3 prompt with rich cinematographic details, structured formatting, and technical specifications optimized for AI video generation.</p>
                    
                    <h4>📝 How to Use Effectively:</h4>
                    <ul>
                        <li><strong>Start Simple:</strong> Enter a basic description in "Your Prompt" field (e.g., "A cat flying through a city")</li>
                        <li><strong>Add Context:</strong> Use Subject and Action fields to specify key elements and movements</li>
                        <li><strong>Choose Style:</strong> Select from 40+ video styles including Cinematic, Documentary, Animation, VHS, etc.</li>
			<li><strong>Set Tone:</strong> Pick from 8 general tone categories with specific sub-tones for precise mood control</li>
                        <li><strong>Advanced Parameters:</strong> Fine-tune camera movement, lighting, visual effects, environment, and atmosphere</li>
    			<li><strong>Include Dialogue:</strong> Add specific dialogue in quotes - the AI will preserve exact wording and add proper formatting</li>
                    </ul>
                    
                    <h4>💡 Pro Tips:</h4>
                    <ul>
                        <li><strong>Start Broad:</strong> Even vague prompts work well - the AI will add professional details</li>
		        <li><strong>Control Tips:</strong> But if you want more control in output result, feel free to be as detailed as possible</li>
		        <li><strong>Mix Styles:</strong> Combine different elements for unique results (e.g., "Horror + Documentary")</li>
                        <li><strong>Use Auto Detect:</strong> Let AI choose optimal settings when unsure</li>
			<li><strong>Dialogue Precision:</strong> The AI preserves exact dialogue wording and adds proper tone descriptions</li>
			<li><strong>Technical Quality:</strong> Generated prompts include professional terminology for lighting, camera work, and audio design</li>
                    </ul>
                    
                    <div class="example">
    <strong>Example Enhancement:</strong><br>
    <strong>Input:</strong> "A robot serving coffee"<br>
    <strong>Enhanced Output:</strong><br>
    "Medium shot. Subject: A sleek, humanoid robot with polished chrome exterior and gentle blue LED eyes, wearing a vintage coffee shop apron, carefully operating a professional espresso machine. Scene: Modern café interior with warm wood furnishings, exposed brick walls, and soft natural light filtering through large windows. Action: The robot methodically steams milk with precise movements, creating perfect microfoam while maintaining eye contact with an off-camera customer. Style: Cinematic, high-definition with warm color grading and shallow depth of field. Audio: Gentle hiss of the espresso machine, subtle café ambiance, and the robot's soft mechanical whirring. --ar 16:9"
</div>
                `;
            } else {
                title.textContent = 'Remix Tab - Best Practices';
                content.innerHTML = `
                    <h4>🎛️ What is the Remix Feature?</h4>
                    <p>The Remix feature takes any existing prompt (from social media, other generators, or previous creations) and creates intelligent variations based on your specific instructions. Perfect for adapting viral prompts, exploring creative alternatives, or fine-tuning existing concepts. 
(PS: It also enhances the output prompt automatically. How cool is that?)</p>
                    
                    <h4>📝 How to Use Effectively:</h4>
                    <ul>
                        <li><strong>Paste Original:</strong> Copy any existing prompt into "Original Prompt" field</li>
                        <li><strong>Specify Changes:</strong> Clearly describe modifications in "How to Vary This Prompt" field</li>
                        <li><strong>Choose Mode:</strong> Toggle between Simple and Advanced remix modes</li>
                        <li><strong>Be Specific:</strong> The more detailed your variation instructions, the more precise the output</li>
                    </ul>
                    
                    <h4>🔀 Simple vs Advanced Mode:</h4>
<ul>
    <li><strong>Simple Mode:</strong> 
        <ul>
            <li>Uses only your variation instructions and the original prompt</li>
            <li>Maintains original structure and style elements where possible</li>
            <li>Best for quick character swaps, setting changes, or mood shifts</li>
        </ul>
    </li>
    <li><strong>Advanced Mode:</strong>
        <ul>
            <li>Combines variation instructions with all technical parameters</li>
            <li>Complete reconstruction using both original concept and new specifications</li>
            <li>Best for comprehensive reimagining with technical precision</li>
        </ul>
    </li>
</ul>
                    
                    <h4>💡 Pro Remix Tips:</h4>
<ul>
    <li><strong>Viral Adaptation:</strong> Take trending prompts and add your unique twist</li>
    <li><strong>Incremental Changes:</strong> Change one element at a time for controlled experimentation</li>
    <li><strong>Genre Hopping:</strong> Transform realistic prompts to fantasy, horror to comedy, etc.</li>
    <li><strong>Technical Enhancement:</strong> Use Advanced mode to add professional cinematography to simple prompts</li>
    <li><strong>Dialogue Integration:</strong> Add character voices and specific lines to existing visual prompts</li>
    <li><strong>Creative Conflicts:</strong> Intentionally mix contradictory elements for surprising artistic results</li>
</ul>
                    
                    <div class="example">
    <strong>Advanced Mode Example:</strong><br>
    <strong>Original:</strong> "A towering creature resembling a pine tree with multiple glowing eyes stands still in the dense forest fog. The camera slowly zooms in from a handheld perspective behind the trees. Add light wind, distant bird cries, and subtle whisper-like sounds. Cold green-gray palette with fog particles and grain. 8 seconds, unsettling and meditative."<br>
    <strong>Variation:</strong> "Change the creature to a towering spider with multiple eyes and sharp mandibles. Continuously sprouting web that traps nearby running people. People are screaming."<br>
    <strong>Advanced Parameters:</strong> "Video Style: Analog/Film Grain, Time of Day: Dusk"<br>
    <strong>Result:</strong> "The camera adopts a handheld perspective, weaving through densely packed trees in a fog-laden forest at dusk, capturing the unsettling sight of a towering spider-like creature. This arachnid behemoth, with multiple glowing eyes and sharp, menacing mandibles, stands ominously amidst the swirling mist, its bulk partially obscured by the drifting fog. As the lens zooms in slowly, the creature continuously spins vast webs from its abdomen, trapping nearby people desperately fleeing through..." 
</div>
                `;
            }
            
            modal.style.display = 'block';
        }

        function closeHelp() {
            document.getElementById('helpModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('helpModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }

        async function generatePrompt() {
            // Validate description field
            const description = document.getElementById("description").value.trim();
            if (!description) {
                showError("Please enter a prompt description before generating.");
                return;
            }
            
            // Remove any existing error messages
            const existingErrors = document.querySelectorAll('.error-message');
            existingErrors.forEach(error => error.remove());

            const payload = {
                uid: window.currentUID || null,
                description: description,
                subject: document.getElementById("subject").value,
                action: document.getElementById("action").value,
                style: document.getElementById("style").value,
                generalTone: document.getElementById("generalTone").value,
                subTone: document.getElementById("subTone").value,
                aspectRatio: document.getElementById("aspectRatio").value,
                cameraMovement: document.getElementById("cameraMovement").value,
                cameraLevel: document.getElementById("cameraLevel").value,
                lensType: document.getElementById("lensType").value,
                depthOfField: document.getElementById("depthOfField").value,
                lighting: document.getElementById("lighting").value,
                filmGrain: document.getElementById("filmGrain").value,
                chromaticAberration: document.getElementById("chromaticAberration").value,
                environment: document.getElementById("environment").value,
                colorPalette: document.getElementById("colorPalette").value,
                weather: document.getElementById("weather").value,
                timeOfDay: document.getElementById("timeOfDay").value,
                motionIntensity: document.getElementById("motionIntensity").value,
                moodEmotion: document.getElementById("moodEmotion").value,
                dialogue: document.getElementById("dialogue").value
            };

            document.getElementById("enhanceOutput").innerText = "⏳ Generating...";
            document.getElementById("enhanceOutputSection").classList.remove("hidden");

            try {
                const response = await fetch("https://66f9e544-efaf-4086-a849-aefdefa94a7e-00-1ya2qyok05zo.sisko.replit.dev/generate", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });

                const data = await response.json();
                
                if (response.ok && data.prompt) {
                    document.getElementById("enhanceOutput").innerText = data.prompt;
                    await updateQuotaCounter();
                } else {
                    showError(data.error || "Server error occurred.");
                    document.getElementById("enhanceOutputSection").classList.add("hidden");
                }
            } catch (error) {
                showError("Error connecting to server. Please try again.");
                document.getElementById("enhanceOutputSection").classList.add("hidden");
                console.error('Error:', error);
            }
        }

        async function remixPrompt() {
            // Validate required fields
            const originalPrompt = document.getElementById("originalPrompt").value.trim();
            const variationInstructions = document.getElementById("variationInstructions").value.trim();
            
            if (!originalPrompt) {
                showError("Please enter an original prompt to remix.");
                return;
            }
            
            if (!variationInstructions) {
                showError("Please specify how you want to vary the prompt.");
                return;
            }
            
            // Remove any existing error messages
            const existingErrors = document.querySelectorAll('.error-message');
            existingErrors.forEach(error => error.remove());

            const isAdvancedMode = document.getElementById('remixModeToggle').checked;
            
            const payload = {
                uid: window.currentUID || null,
                originalPrompt: originalPrompt,
                variationInstructions: variationInstructions,
                remixMode: isAdvancedMode ? "advanced" : "simple"
            };

            // Add advanced parameters if in advanced mode
            if (isAdvancedMode) {
                payload.subject = document.getElementById("remixSubject").value;
                payload.action = document.getElementById("remixAction").value;
                payload.style = document.getElementById("remixStyle").value;
                payload.generalTone = document.getElementById("remixGeneralTone").value;
                payload.subTone = document.getElementById("remixSubTone").value;
                payload.aspectRatio = document.getElementById("remixAspectRatio").value;
                payload.cameraMovement = document.getElementById("remixCameraMovement").value;
                payload.cameraLevel = document.getElementById("remixCameraLevel").value;
                payload.lensType = document.getElementById("remixLensType").value;
                payload.depthOfField = document.getElementById("remixDepthOfField").value;
                payload.lighting = document.getElementById("remixLighting").value;
                payload.filmGrain = document.getElementById("remixFilmGrain").value;
                payload.chromaticAberration = document.getElementById("remixChromaticAberration").value;
                payload.environment = document.getElementById("remixEnvironment").value;
                payload.colorPalette = document.getElementById("remixColorPalette").value;
                payload.weather = document.getElementById("remixWeather").value;
                payload.timeOfDay = document.getElementById("remixTimeOfDay").value;
                payload.motionIntensity = document.getElementById("remixMotionIntensity").value;
                payload.moodEmotion = document.getElementById("remixMoodEmotion").value;
                payload.dialogue = document.getElementById("remixDialogue").value;
            }

            document.getElementById("remixOutput").innerText = "⏳ Remixing...";
            document.getElementById("remixOutputSection").classList.remove("hidden");

            try {
                const response = await fetch("https://66f9e544-efaf-4086-a849-aefdefa94a7e-00-1ya2qyok05zo.sisko.replit.dev/remix", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });

                const data = await response.json();
                
                if (response.ok && data.prompt) {
                    document.getElementById("remixOutput").innerText = data.prompt;
                    await updateQuotaCounter();
                } else {
                    showError(data.error || "Server error occurred.");
                    document.getElementById("remixOutputSection").classList.add("hidden");
                }
            } catch (error) {
                showError("Error connecting to server. Please try again.");
                document.getElementById("remixOutputSection").classList.add("hidden");
                console.error('Error:', error);
            }
        }

        function copyPrompt(outputId) {
            const output = document.getElementById(outputId);
            const text = output.textContent;
            
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).then(() => {
                    showCopyFeedback();
                }).catch(err => {
                    console.error('Failed to copy:', err);
                    fallbackCopyTextToClipboard(text);
                });
            } else {
                fallbackCopyTextToClipboard(text);
            }
        }

        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-999999px";
            textArea.style.top = "-999999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showCopyFeedback();
            } catch (err) {
                console.error('Fallback: Oops, unable to copy', err);
            }
            
            document.body.removeChild(textArea);
        }

        function showCopyFeedback() {
            // Show popup notification
            showPopupNotification('✅ Copied to clipboard!', 'success');
            
            // Also change button text briefly
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '✅ Copied!';
            const originalBg = button.style.backgroundColor;
            button.style.backgroundColor = '#1a7f37';
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.style.backgroundColor = originalBg;
            }, 2000);
        }

        function showPopupNotification(message, type = 'success') {
            // Remove any existing popup
            const existingPopup = document.querySelector('.popup-notification');
            if (existingPopup) {
                existingPopup.remove();
            }

            // Create new popup
            const popup = document.createElement('div');
            popup.className = `popup-notification ${type}`;
            popup.textContent = message;
            
            // Add to body
            document.body.appendChild(popup);
            
            // Trigger animation
            setTimeout(() => {
                popup.classList.add('show');
            }, 10);
            
            // Remove after delay (3.5s)
            setTimeout(() => {
                popup.classList.remove('show');
                setTimeout(() => {
                    if (popup.parentNode) {
                        popup.remove();
                    }
                }, 400);
            }, 3500);
        }

        async function updateQuotaCounter() {
            if (!window.currentUID) return;

            try {
                const response = await fetch('https://66f9e544-efaf-4086-a849-aefdefa94a7e-00-1ya2qyok05zo.sisko.replit.dev/get-quota', {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ uid: window.currentUID })
                });

                const data = await response.json();
                if (data.quota !== undefined) {
                    document.getElementById("quotaCounter").innerText = `🎟️ You have ${data.quota} prompts left`;
                } else {
                    document.getElementById("quotaCounter").innerText = `❌ Could not retrieve quota`;
                }
            } catch (e) {
                console.error("Quota fetch failed:", e);
                document.getElementById("quotaCounter").innerText = `⚠️ Error loading quota`;
            }
        }

document.addEventListener("DOMContentLoaded", () => {
  // Collapse Advanced sections by default
  document.getElementById("enhanceAdvanced").style.display = "none";
  document.getElementById("remixAdvanced").style.display = "none";
  document.getElementById("enhanceVideoGallery").style.display = "none";
  document.getElementById("remixVideoGallery").style.display = "none";

  // Firebase Auth
  const firebaseConfig = {
    apiKey: "AIzaSyAaj5OXxoFaWkv9potb0eAV75Zl8oV4Iu0",
    authDomain: "veo3-generator-3aa92.firebaseapp.com",
    projectId: "veo3-generator-3aa92",
    storageBucket: "veo3-generator-3aa92.firebasestorage.app",
    messagingSenderId: "96789033293",
    appId: "1:96789033293:web:408853c3ce51c353458704"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const provider = new firebase.auth.GoogleAuthProvider();
  const ADMIN_UIDS = ["9n0qDAZ5xYOYmoBpcpbdvgv13I42"]; // 👈 Replace with your actual UID

  function isAdmin(uid) {
     return ADMIN_UIDS.includes(uid);
  }

  const authPanel = document.getElementById("authPanel");

  // Sign-in Button
  const loginBtn = document.createElement("button");
  loginBtn.id = "loginBtn";
  loginBtn.className = "copy-btn";
  loginBtn.innerText = "🔐 Sign in with Google";
  loginBtn.style.float = "right";
  authPanel.appendChild(loginBtn);

  // Quota Counter
  const quotaCounter = document.createElement("div");
  quotaCounter.id = "quotaCounter";
  quotaCounter.style.fontSize = "13px";
  quotaCounter.style.color = "#444";
  quotaCounter.style.marginTop = "4px";
  quotaCounter.style.float = "right";
  quotaCounter.style.marginLeft = "10px";
  authPanel.appendChild(quotaCounter);

  // Redeem Code UI
  const redeemContainer = document.createElement("div");
  redeemContainer.style.marginTop = "8px";

  const redeemInput = document.createElement("input");
  redeemInput.type = "text";
  redeemInput.id = "redeemInput";
  redeemInput.placeholder = "Enter redeem code";
  redeemInput.style.marginRight = "5px";

  const redeemBtn = document.createElement("button");
  redeemBtn.id = "redeemBtn";
  redeemBtn.innerText = "Redeem";
  redeemBtn.className = "copy-btn";

  const redeemStatus = document.createElement("div");
  redeemStatus.id = "redeemStatus";
  redeemStatus.style.fontSize = "13px";
  redeemStatus.style.marginTop = "4px";

  redeemContainer.appendChild(redeemInput);
  redeemContainer.appendChild(redeemBtn);
  redeemContainer.appendChild(redeemStatus);
  authPanel.appendChild(redeemContainer);

  // User Info Display
  const userInfo = document.createElement("div");
  userInfo.id = "userInfo";
  userInfo.style.fontSize = "12px";
  userInfo.style.color = "#666";
  userInfo.style.marginTop = "8px";
  authPanel.appendChild(userInfo);

  // Login button click handler
  loginBtn.addEventListener("click", async () => {
    const user = auth.currentUser;
    if (!user) {
      try {
        const result = await auth.signInWithPopup(provider);
        const username = result.user.email.split("@")[0];
        loginBtn.innerText = "🚪 Sign out";
        userInfo.innerText = `Welcome, ${username}!`;
        window.currentUID = result.user.uid;
        console.log("Your UID:", result.user.uid); // ✅ Print your UID in browser console
        await updateQuotaCounter();
        console.log("User signed in:", result.user);
      } catch (error) {
        console.error("Login error:", error);
        showPopupNotification(`Login failed: ${error.message}`, 'error');
      }
    } else {
      try {
        await auth.signOut();
        loginBtn.innerText = "🔐 Sign in with Google";
        userInfo.innerText = "";
        window.currentUID = null;
      } catch (error) {
        console.error("Logout error:", error);
        showPopupNotification(`Logout failed: ${error.message}`, 'error');
      }
    }
  });

  // Auth state change
  auth.onAuthStateChanged(async (user) => {
    if (user) {
      const username = user.email.split("@")[0];
      loginBtn.innerText = "🚪 Sign out";
      userInfo.innerText = `Welcome, ${username}!`;
      window.currentUID = user.uid;
      await updateQuotaCounter();
      if (isAdmin(user.uid)) {
  const adminPanel = document.createElement("div");
  adminPanel.id = "adminPanel";
  adminPanel.style.marginTop = "16px";
  adminPanel.innerHTML = `
    <h4>🎛️ Admin Code Generator</h4>
    <input type="text" id="codeInput" placeholder="Enter code (e.g., TEST50)" style="margin-bottom:4px" /><br>
    <input type="number" id="quotaInput" placeholder="Quota (e.g., 50)" /><br>
    <input type="date" id="expiryInput" placeholder="Expiry Date (YYYY-MM-DD)" /><br>
    <button class="copy-btn" id="generateCodeBtn">Generate Code</button>
    <div id="adminFeedback" style="margin-top:4px; font-size:13px;"></div>
  `;
  document.getElementById("authPanel").appendChild(adminPanel);

  document.getElementById("generateCodeBtn").onclick = async () => {
    const code = document.getElementById("codeInput").value.trim().toUpperCase();
    const quota = parseInt(document.getElementById("quotaInput").value.trim());
    const expires = document.getElementById("expiryInput").value;

    if (!code || !quota || !expires) {
      showPopupNotification("❌ All fields are required.");
      return;
    }

    try {
      const res = await fetch("https://66f9e544-efaf-4086-a849-aefdefa94a7e-00-1ya2qyok05zo.sisko.replit.dev/create-code", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ code, quota, expires, uid: window.currentUID })
      });

      const data = await res.json();
      if (data.success) {
        showPopupNotification("✅ Code created!");
      } else {
        showPopupNotification("❌ " + data.error);
      }
    } catch (err) {
      console.error("Error creating code:", err);
      showPopupNotification("⚠️ Network error.");
    }
  };

// Admin: View User Quota & Redeemed Codes
const historyPanel = document.createElement("div");
historyPanel.id = "historyPanel";
historyPanel.style.marginTop = "24px";
historyPanel.innerHTML = `
  <h4>🧾 View User Redemption History</h4>
  <input type="text" id="emailInput" placeholder="Enter user email" style="margin-bottom:4px" /><br>
  <button class="copy-btn" id="lookupBtn">🔍 Find History</button>
  <div id="historyResult" style="margin-top:8px; font-size:13px;"></div>
`;
authPanel.appendChild(historyPanel);

document.getElementById("lookupBtn").onclick = async () => {
  const email = document.getElementById("emailInput").value.trim().toLowerCase();
  const historyResult = document.getElementById("historyResult");

  if (!email) {
    showPopupNotification("⚠️ Please enter an email.");
    return;
  }

  try {
    // First lookup UID by email
    const res = await fetch("https://66f9e544-efaf-4086-a849-aefdefa94a7e-00-1ya2qyok05zo.sisko.replit.dev/email-to-uid", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ uid: window.currentUID, email })
    });

    const lookup = await res.json();

    if (!lookup.found) {
      historyResult.innerHTML = `<span style="color:red">❌ No user found for email: ${email}</span>`;
      return;
    }

    // Now fetch user history by UID
    const historyRes = await fetch("https://66f9e544-efaf-4086-a849-aefdefa94a7e-00-1ya2qyok05zo.sisko.replit.dev/user-history", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ uid: window.currentUID, target: lookup.uid })
    });

    const data = await historyRes.json();

    if (data.error) {
      historyResult.innerHTML = `<span style="color:red">❌ ${data.error}</span>`;
    } else {
      historyResult.innerHTML = `
        <b>Quota:</b> ${data.quota}<br>
        <b>Used Today:</b> ${data.usedToday}<br>
        <b>Last Use:</b> ${data.lastUseDate}<br>
        <b>Redeemed Codes:</b><br>
        <ul>${(data.redeemedCodes || []).map(code => `<li>${code}</li>`).join("")}</ul>
      `;
    }

  } catch (err) {
    console.error("Email lookup failed:", err);
    historyResult.innerHTML = `<span style="color:red">⚠️ Network error</span>`;
  }
};

document.getElementById("viewHistoryBtn").onclick = async () => {
  const targetUID = document.getElementById("historyUserInput").value.trim();
  const historyResult = document.getElementById("historyResult");

  if (!targetUID) {
    showPopupNotification("⚠️ Please enter a user UID.");
    return;
  }

  try {
    const res = await fetch("https://66f9e544-efaf-4086-a849-aefdefa94a7e-00-1ya2qyok05zo.sisko.replit.dev/user-history", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ uid: window.currentUID, target: targetUID })
    });

    const data = await res.json();

    if (data.error) {
      historyResult.innerHTML = `<span style="color:red">❌ ${data.error}</span>`;
    } else {
      historyResult.innerHTML = `
        <b>Quota:</b> ${data.quota}<br>
        <b>Used Today:</b> ${data.usedToday}<br>
        <b>Last Use:</b> ${data.lastUseDate}<br>
        <b>Redeemed Codes:</b><br>
        <ul>${(data.redeemedCodes || []).map(code => `<li>${code}</li>`).join("")}</ul>
      `;
    }
  } catch (err) {
    console.error("Fetch failed:", err);
    historyResult.innerHTML = `<span style="color:red">⚠️ Network error</span>`;
  }
};
}
    } else {
      loginBtn.innerText = "🔐 Sign in with Google";
      userInfo.innerText = "";
      window.currentUID = null;
    }
  });

  // Redeem button logic
  redeemBtn.addEventListener("click", async () => {
  const code = redeemInput.value.trim();
  const uid = window.currentUID;
  const user = auth.currentUser;

  if (!uid || !code || !user || !user.email) {
    showPopupNotification("❌ Please enter a code and sign in.", 'error');
    return;
  }

  try {
    console.log("Sending redeem request with:", {
      uid,
      code,
      email: user.email
    });

    const res = await fetch("https://66f9e544-efaf-4086-a849-aefdefa94a7e-00-1ya2qyok05zo.sisko.replit.dev/redeem-code", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ uid, code, email: user.email })  // ✅ SAFE
    });

    const data = await res.json();
    if (data.success) {
      showPopupNotification(`✅ Code redeemed! +${data.added} prompts added.`, 'success');
      await updateQuotaCounter();
    } else {
      showPopupNotification(`❌ ${data.error}`, 'error');
    }
  } catch (err) {
    console.error("Redeem failed", err);
    showPopupNotification("⚠️ Network error", 'warning');
  }
});
});
    </script>
</body>
</html>
